<!DOCTYPE html>
<html lang="fr">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Tableau de bord - Theses MR</title>
  <link rel="stylesheet" href="../css/main.css">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">

  <link rel="stylesheet" href="../css/dashboard.css">
  <script src="../js/main.js" defer></script>
  <!-- <script src="../js/TheseMgmt.js"></script> -->
  <script src="../js/dashboard.js" defer></script>
  <script src="../js/profile.js" defer></script>
  <script src="../js/thesis.js" defer></script>
</head>
<body>
  <div class="dashboard-layout">
    <aside class="sidebar">
      <div class="sidebar-header">
        <div class="logo">
          <h1>Theses MR</h1>
        </div>
        <button id="close-sidebar" class="sidebar-toggle">
          <span></span>
        </button>
      </div>
      
      <div class="user-profile">
        <div class="user-avatar">
          <div class="avatar-placeholder">JS</div>
        </div>
        <div class="user-info">
          <h3 id="user-name">Jean Dupont</h3>
          <p id="user-role">Doctorant</p>
        </div>
      </div>
      
      <nav class="sidebar-nav">
        <ul>
          <li><a href="#" class="active" data-section="overview"><span class="nav-icon overview-icon"></span>Aper√ßu</a></li>
          <li><a href="#" data-section="profile"><span class="nav-icon profile-icon"></span>Mon Profil</a></li>
          <li><a href="#" data-section="thesis"><span class="nav-icon thesis-icon"></span>Gestion de Th√®se</a></li>
<li>
  <a href="#" data-section="notifications">
    <span class="nav-icon notifications-icon"></span>Notifications
    <span id="notification-badge" class="badge">0</span>
  </a>
</li>          <li><a href="#" data-section="messages"><span class="nav-icon messages-icon"></span>Messages</a></li>
          <li><a href="#" data-section="settings"><span class="nav-icon settings-icon"></span>Param√®tres</a></li>
        </ul>
      </nav>
      
      <div class="sidebar-footer">
        <a href="#" id="logout-btn"><span class="nav-icon logout-icon"></span>D√©connexion</a>
      </div>
    </aside>

    <div class="main-content">
      <header class="dashboard-header">
        <div class="header-left">
          <button id="open-sidebar" class="sidebar-toggle">
            <span></span>
          </button>
          <h2 class="page-title">Tableau de bord</h2>
        </div>
        <div class="header-right">
          <div class="header-search">
            <input type="text" placeholder="Rechercher...">
            <button class="search-btn"></button>
          </div>
          <div class="header-notifications">
            <button class="notification-btn" ><a href="#" data-section="notifications"><span class="badge" id="notification-txt">1</span></a></button>
          </div>
        </div>
      </header>

      <!-- Section Aper√ßu -->
      <section id="overview" class="dashboard-section active">
        <div class="section-header">
          <h2>Aper√ßu du tableau de bord</h2>
          <p>Bienvenue, <span id="overview-name">Jean</span> ! Voici l'avancement de votre doctorat.</p>
        </div>
        
        <div class="stats-grid">
          <div class="stat-card">
            <div class="stat-icon research-icon"></div>
            <div class="stat-info">
              <h3>√âtape de recherche</h3>
              <p class="stat-value">R√©daction de th√®se</p>
            </div>
          </div>
          <div class="stat-card">
            <div class="stat-icon enrollment-icon"></div>
            <div class="stat-info">
              <h3>Ann√©e d'inscription</h3>
              <p class="stat-value">2023</p>
            </div>
          </div>
          <div class="stat-card">
            <div class="stat-icon thesis-status-icon"></div>
            <div class="stat-info">
              <h3>Statut de la th√®se</h3>
              <p class="stat-value status-in-progress">En cours</p>
            </div>
          </div>
          <div class="stat-card">
            <div class="stat-icon timeline-icon"></div>
            <div class="stat-info">
              <h3>Temps restant</h3>
              <p class="stat-value">2 ans 3 mois</p>
            </div>
          </div>
        </div>
        
        <div class="dashboard-cards">
          <div class="card thesis-summary-card">
            <div class="card-header">
              <h3>R√©sum√© de la th√®se</h3>
              <a href="#" class="card-action" data-section="thesis">Voir d√©tails</a>
            </div>
            <div class="card-body">
              <h4 id="thesis-title">Applications du Machine Learning dans les Diagnostics M√©dicaux</h4>
              <div class="thesis-meta">
                <span class="label">Soumis :</span> <span id="thesis-date">15 mai 2023</span>
              </div>
              <p id="thesis-abstract">Cette recherche explore l'application des algorithmes de machine learning pour am√©liorer la pr√©cision des proc√©dures de diagnostic m√©dical, avec un accent sur la d√©tection pr√©coce des maladies cardiovasculaires.</p>
              <div class="thesis-progress">
                <div class="progress-label">
                  <span>Progression</span>
                  <span>45%</span>
                </div>
                <div class="progress-bar">
                  <div class="progress" style="width: 45%"></div>
                </div>
              </div>
            </div>
          </div>
          
          <div class="card upcoming-card" >
            <div class="card-header">
              <h3>√âch√©ances √† venir</h3>
              <a href="#" class="card-action">Tout voir</a>
            </div>
            <div class="card-body">
              <ul class="deadline-list" id="deadline-list">
                <li class="deadline-item">
                  <div class="deadline-date">
                    <span class="month">Juin</span>
                    <span class="day">15</span>
                  </div>
                  <div class="deadline-info">
                    <h4>Soumission du rapport d'avancement</h4>
                    <p>Soumettre votre rapport annuel √† l'√©cole doctorale</p>
                  </div>
                  <div class="deadline-status urgent">
                    <span>Urgent</span>
                  </div>
                </li>
                <li class="deadline-item">
                  <div class="deadline-date">
                    <span class="month">Juil</span>
                    <span class="day">30</span>
                  </div>
                  <div class="deadline-info">
                    <h4>Chapitre M√©thodologie</h4>
                    <p>Compl√©ter et soumettre √† votre directeur pour r√©vision</p>
                  </div>
                  <div class="deadline-status upcoming">
                    <span>√Ä venir</span>
                  </div>
                </li>
                <li class="deadline-item">
                  <div class="deadline-date">
                    <span class="month">Sep</span>
                    <span class="day">10</span>
                  </div>
                  <div class="deadline-info">
                    <h4>S√©minaire doctoral annuel</h4>
                    <p>Pr√©parer une pr√©sentation sur l'avancement de votre recherche</p>
                  </div>
                  <div class="deadline-status planned">
                    <span>Planifi√©</span>
                  </div>
                </li>
              </ul>
            </div>
          </div>
        </div>
        
        <div class="dashboard-cards">
          <div class="card supervisors-card">
            <div class="card-header">
              <h3>Votre √©quipe de direction</h3>
              <a href="#" class="card-action" data-section="supervisors">Tout voir</a>
            </div>
            <div class="card-body">
  <div class="supervisor-list" id="supervisor-list">
    <!-- Le contenu sera inject√© dynamiquement ici -->
  </div>
</div>

            <!-- <div class="card-body">
              <div class="supervisor-list">
                <div class="supervisor-item">
                  <div class="supervisor-avatar">
                    <div class="avatar-placeholder">BS</div>
                  </div>
                  <div class="supervisor-info">
                    <h4>Prof. Bernard Simon</h4>
                    <p>Directeur de th√®se</p>
                    <div class="supervisor-contact">
                      <a href="mailto:b.simon@universite.edu" class="contact-link email">Email</a>
                      <a href="#" class="contact-link message">Message</a>
                    </div>
                  </div>
                </div>
                <div class="supervisor-item">
                  <div class="supervisor-avatar">
                    <div class="avatar-placeholder">AD</div>
                  </div>
                  <div class="supervisor-info">
                    <h4>Dr. Alice Dubois</h4>
                    <p>Superviseur de th√®se</p>
                    <div class="supervisor-contact">
                      <a href="mailto:a.dubois@universite.edu" class="contact-link email">Email</a>
                      <a href="#" class="contact-link message">Message</a>
                    </div>
                  </div>
                </div>
              </div>
            </div> -->
          </div>
          
          <div class="card resources-card">
            <div class="card-header">
                <h3>Ressources doctorales</h3>
                <a href="#" class="card-action">Tout voir</a>
              </div>
              <div class="card-body">
                <ul class="resources-list">
                  <li class="resource-item">
                    <div class="resource-icon document-icon"></div>
                    <div class="resource-info">
                      <h4>Directives de mise en forme</h4>
                      <p>Exigences officielles pour la mise en forme des th√®ses</p>
                    </div>
                    <a id="telecharger-link" href="#" class="resource-action" download>T√©l√©charger</a>
                  </li>
                  <li class="resource-item">
                    <div class="resource-icon calendar-icon"></div>
                    <div class="resource-info">
                      <h4>Calendrier acad√©mique 2025</h4>
                      <p>Dates importantes et √©ch√©ances pour les doctorants</p>
                    </div>
                    <a id="voir-link" href="#" class="resource-action" target="_blank">Voir</a>
                  </li>
                  <li class="resource-item">
                    <div class="resource-icon library-icon"></div>
                    <div class="resource-info">
                      <h4>Ressources de recherche</h4>
                      <p>Acc√®s aux revues, bases de donn√©es et mat√©riel de recherche</p>
                    </div>
                    <a id="acceder-link" href="#" class="resource-action" target="_blank">Acc√©der</a>
                  </li>
                </ul>
                
                <!-- <ul class="resources-list">
                  <li class="resource-item">
                    <div class="resource-icon document-icon"></div>
                    <div class="resource-info">
                      <h4>Directives de mise en forme</h4>
                      <p>Exigences officielles pour la mise en forme des th√®ses</p>
                    </div>
                    <a id="telecharger-link" href="#" class="resource-action" download>T√©l√©charger</a>
                  </li>
                  <li class="resource-item">
                    <div class="resource-icon calendar-icon"></div>
                    <div class="resource-info">
                      <h4>Calendrier acad√©mique 2025</h4>
                      <p>Dates importantes et √©ch√©ances pour les doctorants</p>
                    </div>
                    <a id="voir-link" href="#" class="resource-action" target="_blank" rel="noopener noreferrer">Voir</a>
                  </li>
                  <li class="resource-item">
                    <div class="resource-icon library-icon"></div>
                    <div class="resource-info">
                      <h4>Ressources de recherche</h4>
                      <p>Acc√®s aux revues, bases de donn√©es et mat√©riel de recherche</p>
                    </div>
                    <a id="acceder-link" href="#" class="resource-action" target="_blank" rel="noopener noreferrer">Acc√©der</a>
                  </li>
                </ul> -->
              </div>
          </div>
        </div>
      </section>

      <!-- Section Profil -->
      <section id="profile" class="dashboard-section">
        <div class="section-header">
          <h2>Mon Profil</h2>
          <p>G√©rez vos informations personnelles et acad√©miques</p>
        </div>
        
        <div class="profile-container">
          <div class="profile-header">
            <div class="profile-avatar">
              <div class="avatar-placeholder large">JD</div>
              <button class="avatar-upload">
                <span>Changer la photo</span>
              </button>
            </div>
            <div class="profile-summary">
              <h3 id="profile-name">Jean Dupont</h3>
              <p id="profile-school">√âcole d'Ing√©nierie</p>
              <!-- <p id="profile-status">Doctorant (2√®me ann√©e)</p> -->
              <div class="profile-actions">
                <button id="edit-profile-btn" class="btn btn-secondary">Modifier le profil</button>
              </div>
            </div>
          </div>
          
          <div class="profile-content">
            <div class="profile-section">
              <h3>Informations personnelles</h3>
              <div class="profile-info-grid" id="personal-info">
                <div class="info-group">
                  <span class="info-label">Nom complet</span>
                  <span class="info-value">Jean Dupont</span>
                </div>
                <div class="info-group">
                  <span class="info-label">Email</span>
                  <span class="info-value">jean.dupont@universite.edu</span>
                </div>
                <div class="info-group">
                  <span class="info-label">ID √âtudiant</span>
                  <span class="info-value">PHD20230015</span>
                </div>
                <div class="info-group">
                  <span class="info-label">T√©l√©phone</span>
                  <span class="info-value">+33 6 12 34 56 78</span>
                </div>
                <div class="info-group">
                  <span class="info-label">Date de naissance</span>
                  <span class="info-value">15 mars 1990</span>
                </div>
                <div class="info-group">
                  <span class="info-label">Nationalit√©</span>
                  <span class="info-value">Fran√ßaise</span>
                </div>
              </div>
            </div>
            
            <div class="profile-section">
              <h3>Informations acad√©miques</h3>
              <div class="profile-info-grid" id="academic-info">
                <div class="info-group">
                  <span class="info-label">√âcole doctorale</span>
                  <span class="info-value">√âcole d'Ing√©nierie</span>
                </div>
                <div class="info-group">
                  <span class="info-label">Unit√© de recherche</span>
                  <span class="info-value">Unit√© de recherche en informatique</span>
                </div>
                <div class="info-group">
                  <span class="info-label">Directeur de th√®se</span>
                  <span class="info-value">Prof. Bernard Simon</span>
                </div>
                <div class="info-group">
                  <span class="info-label">Superviseur de th√®se</span>
                  <span class="info-value">Dr. Alice Dubois</span>
                </div>
                <div class="info-group">
                  <span class="info-label">Date inscription</span>
                  <span class="info-value">5 septembre 2023</span>
                </div>
                <div class="info-group">
                  <span class="info-label">Fin pr√©vue</span>
                  <span class="info-value">Septembre 2026</span>
                </div>
              </div>
            </div>
          </div>

          <!-- Formulaire de modification de profil (cach√© par d√©faut) -->
          <div class="profile-edit-form hidden" id="profile-edit-form">
            <div class="form-header">
              <h3>Modifier les informations du profil</h3>
              <button id="cancel-edit-btn" class="btn btn-text">Annuler</button>
            </div>
            
            <form id="edit-profile-form">
              <div class="form-tabs">
                <button type="button" class="form-tab active" data-tab="personal">Infos personnelles</button>
                <button type="button" class="form-tab" data-tab="academic">Infos acad√©miques</button>
              </div>
              
              <div class="form-tab-content active" id="tab-personal">
                <div class="form-group-row">
                  <div class="form-group">
                    <label for="edit-firstname">Pr√©nom</label>
                    <input type="text" id="edit-firstname" name="firstname" value="Jean">
                  </div>
                  <div class="form-group">
                    <label for="edit-lastname">Nom</label>
                    <input type="text" id="edit-lastname" name="lastname" value="Dupont">
                  </div>
                </div>
                
                <div class="form-group">
                    <label for="edit-email">Adresse email</label>
                    <input type="email" id="edit-email" name="email" value="jean.dupont@universite.edu">
                </div>
                
                <div class="form-group">
                    <label for="edit-phone">Num√©ro de t√©l√©phone</label>
                    <input type="tel" id="edit-phone" name="phone" value="+33 6 12 34 56 78">
                </div>
                
                <div class="form-group-row">
                    <div class="form-group">
                        <label for="edit-birth-date">Date de naissance</label>
                        <input type="date" id="edit-birth-date" name="birth-date" value="1990-03-15">
                    </div>
                    <div class="form-group">
                        <label for="edit-nationality">Nationalit√©</label>
                        <input type="text" id="edit-nationality" name="nationality" value="Fran√ßaise">
                    </div>
                </div>
              </div>
              
              <div class="form-tab-content" id="tab-academic">
                <div class="form-group">
                    <label for="edit-matricule">ID √âtudiant (Matricule)</label>
                    <input type="text" id="edit-matricule" name="matricule" value="PHD20230015" readonly>
                    <small class="form-note">L'ID √©tudiant ne peut pas √™tre modifi√©</small>
                </div>
                
                <div class="form-group">
                    <label for="edit-research-unit">Unit√© de recherche</label>
                    <select id="edit-research-unit" name="research-unit">
                        <option value="unit1" selected>Unit√© de recherche en informatique</option>
                        <option value="unit2">Unit√© de recherche biom√©dicale</option>
                        <option value="unit3">Unit√© de recherche en physique</option>
                        <option value="unit4">Unit√© de recherche en √©conomie</option>
                    </select>
                </div>
                
                <div class="form-group">
                    <label for="edit-doctoral-school">√âcole doctorale</label>
                    <select id="edit-doctoral-school" name="doctoral-school">
                        <option value="school1" selected>√âcole d'Ing√©nierie</option>
                        <option value="school2">√âcole des Sciences</option>
                        <option value="school3">√âcole de M√©decine</option>
                        <option value="school4">√âcole de Commerce</option>
                    </select>
                </div>
                
                <div class="form-group-row">
                    <div class="form-group">
                        <label for="edit-enrollment-date">Date d'inscription</label>
                        <input type="date" id="edit-enrollment-date" name="enrollment-date" value="2023-09-05" readonly>
                        <small class="form-note">La date d'inscription ne peut pas √™tre modifi√©e</small>
                    </div>
                    <div class="form-group">
                        <label for="edit-expected-completion">Fin pr√©vue</label>
                        <input type="date" id="edit-expected-completion" name="expected-completion" value="2026-09-05">
                    </div>
                </div>
              </div>
              
              <div class="form-actions">
                <button type="submit" class="btn btn-primary">Enregistrer</button>
              </div>
            </form>
          </div>
        </div>
      </section>

      <!-- Section Gestion de th√®se -->
      <section id="thesis" class="dashboard-section">
        <div class="section-header">
          <h2>Gestion de th√®se</h2>
          <p>Soumettez et suivez l'√©tat de votre th√®se</p>
        </div>
        
        <div class="thesis-container">
          <div class="thesis-status-card">
            <div class="thesis-status-header">
              <h3>Statut de la th√®se</h3>
              <span class="status-badge in-progress">En cours</span>
            </div>
            <div class="thesis-timeline">
              <div class="timeline-item active completed">
                <div class="timeline-marker"></div>
                <div class="timeline-content">
                  <h4>Enregistrement de la th√®se</h4>
                  <p>Votre sujet de th√®se a √©t√© approuv√© et enregistr√©.</p>
                  <span class="timeline-date">15 septembre 2023</span>
                </div>
              </div>
              <div class="timeline-item active current">
                <div class="timeline-marker"></div>
                <div class="timeline-content">
                  <h4>Recherche & R√©daction</h4>
                  <p>Actuellement en cours. Soumettez des brouillons √† votre directeur r√©guli√®rement.</p>
                  <span class="timeline-date">√âtape actuelle</span>
                </div>
              </div>
              <div class="timeline-item">
                <div class="timeline-marker"></div>
                <div class="timeline-content">
                  <h4>Soumission de la th√®se</h4>
                  <p>Soumettre votre th√®se compl√®te pour √©valuation.</p>
                </div>
              </div>
              <div class="timeline-item">
                <div class="timeline-marker"></div>
                <div class="timeline-content">
                  <h4>Pr√©paration de la soutenance</h4>
                  <p>Pr√©parer votre soutenance de th√®se.</p>
                </div>
              </div>
              <div class="timeline-item">
                <div class="timeline-marker"></div>
                <div class="timeline-content">
                  <h4>Soutenance de th√®se</h4>
                  <p>Pr√©senter et d√©fendre votre recherche.</p>
                </div>
              </div>
              <div class="timeline-item">
                <div class="timeline-marker"></div>
                <div class="timeline-content">
                  <h4>Approbation finale</h4>
                  <p>Th√®se approuv√©e et doctorat obtenu.</p>
                </div>
              </div>
            </div>
          </div>
          
          <div class="thesis-details-card">
            <div class="card-header">
              <h3>D√©tails de la th√®se</h3>
              <button id="edit-thesis-btn" class="btn btn-small btn-secondary">Modifier</button>
            </div>
            <div class="card-body">
              <div class="thesis-info" id="thesis-info">
                <div class="info-group">
                  <span class="info-label">Titre</span>
                  <span class="info-value">Applications du Machine Learning dans les Diagnostics M√©dicaux</span>
                </div>
                <div class="info-group">
                  <span class="info-label">R√©sum√©</span>
                  <span class="info-value">Cette recherche explore l'application des algorithmes de machine learning pour am√©liorer la pr√©cision des proc√©dures de diagnostic m√©dical, avec un accent sur la d√©tection pr√©coce des maladies cardiovasculaires.</span>
                </div>
                <div class="info-group">
                  <span class="info-label">Mots-cl√©s</span>
                  <div class="keyword-list">
                    <span class="keyword">Machine Learning</span>
                    <span class="keyword">Diagnostics m√©dicaux</span>
                    <span class="keyword">IA</span>
                    <span class="keyword">Sant√©</span>
                  </div>
                </div>
                <div class="info-group">
                  <span class="info-label">Date d`enregistrement</span>
                  <span class="info-value">15 septembre 2023</span>
                </div>
              </div>
              
              <!-- Formulaire de modification de th√®se (cach√© par d√©faut) -->
              <div class="thesis-edit-form hidden" id="thesis-edit-form">
                <form id="edit-thesis-form">
                  <div class="form-group">
                    <label for="edit-thesis-title">Titre de la th√®se</label>
                    <input type="text" id="edit-thesis-title" name="thesis-title" value="Applications du Machine Learning dans les Diagnostics M√©dicaux">
                  </div>
                  
                  <div class="form-group">
                    <label for="edit-thesis-summary">R√©sum√© de la th√®se</label>
                    <textarea id="edit-thesis-summary" name="thesis-summary" rows="4">Cette recherche explore l'application des algorithmes de machine learning pour am√©liorer la pr√©cision des proc√©dures de diagnostic m√©dical, avec un accent sur la d√©tection pr√©coce des maladies cardiovasculaires.</textarea>
                  </div>
                  
                  <div class="form-group">
                    <label for="edit-keywords">Mots-cl√©s (s√©par√©s par des virgules)</label>
                    <input type="text" id="edit-keywords" name="keywords" value="Machine Learning, Diagnostics m√©dicaux, IA, Sant√©">
                  </div>
                  
                  <div class="form-actions">
                    <button type="button" id="cancel-thesis-edit" class="btn btn-text">Annuler</button>
                    <button type="submit" class="btn btn-primary">Enregistrer</button>
                  </div>
                </form>
              </div>
            </div>
          </div>
          
          <div class="thesis-documents-card">
            <div class="card-header">
              <h3>Documents de th√®se</h3>
              <button id="upload-document-btn" class="btn btn-small btn-primary">T√©l√©verser</button>
            </div>
            <div class="card-body">
              <div class="document-list">
                <div class="document-item">
                  <div class="document-icon pdf-icon"></div>
                  <div class="document-info">
                    <h4>Proposition de th√®se</h4>
                    <p>T√©l√©vers√© le 15 septembre 2023</p>
                  </div>
                  <div class="document-actions">
                    <a href="#" class="document-action download">T√©l√©charger</a>
                    <a href="#" class="document-action view">Voir</a>
                  </div>
                </div>
                <div class="document-item">
                  <div class="document-icon pdf-icon"></div>
                  <div class="document-info">
                    <h4>Chapitre Revue de litt√©rature</h4>
                    <p>T√©l√©vers√© le 10 d√©cembre 2023</p>
                  </div>
                  <div class="document-actions">
                    <a href="#" class="document-action download">T√©l√©charger</a>
                    <a href="#" class="document-action view">Voir</a>
                  </div>
                </div>
                <div class="document-item">
                  <div class="document-icon pdf-icon"></div>
                  <div class="document-info">
                    <h4>Brouillon M√©thodologie</h4>
                    <p>T√©l√©vers√© le 28 f√©vrier 2024</p>
                  </div>
                  <div class="document-actions">
                    <a href="#" class="document-action download">T√©l√©charger</a>
                    <a href="#" class="document-action view">Voir</a>
                  </div>
                </div>
                <div class="document-item">
                  <div class="document-icon word-icon"></div>
                  <div class="document-info">
                    <h4>Analyse des donn√©es</h4>
                    <p>T√©l√©vers√© le 15 avril 2024</p>
                  </div>
                  <div class="document-actions">
                    <a href="#" class="document-action download">T√©l√©charger</a>
                    <a href="#" class="document-action view">Voir</a>
                  </div>
                </div>
              </div>
              
              <!-- Formulaire de t√©l√©versement (cach√© par d√©faut) -->
              <div class="upload-form hidden" id="upload-document-form">
                <div class="form-header">
                  <h3>T√©l√©verser un document</h3>
                  <button id="cancel-upload" class="btn btn-text">Annuler</button>
                </div>
                <form id="document-upload-form">
                  <div class="form-group">
                    <label for="document-title">Titre du document</label>
                    <input type="text" id="document-title" name="document-title" required>
                  </div>
                  
                  <div class="form-group">
                    <label for="document-type">Type de document</label>
                    <select id="document-type" name="document-type" required>
                      <option value="">S√©lectionner un type</option>
                      <option value="proposal">Proposition de th√®se</option>
                      <option value="chapter">Chapitre de th√®se</option>
                      <option value="draft">Brouillon complet</option>
                      <option value="final">Th√®se finale</option>
                      <option value="other">Autre</option>
                    </select>
                  </div>
                  
                  <div class="form-group">
                    <label for="document-file">T√©l√©verser un fichier (PDF uniquement)</label>
                    <div class="file-upload">
                      <input type="file" id="document-file" name="document-file" accept=".pdf, .docx" required>
                      <div class="upload-placeholder">
                        <span class="upload-icon"></span>
                        <span class="upload-text">Glissez-d√©posez votre fichier ici, ou cliquez pour parcourir</span>
                      </div>
                    </div>
                  </div>
                  
                  <div class="form-group">
                    <label for="document-notes">Notes (optionnel)</label>
                    <textarea id="document-notes" name="document-notes" rows="3"></textarea>
                  </div>
                  
                  <div class="form-actions">
                    <button type="submit" class="btn btn-primary">T√©l√©verser</button>
                  </div>
                </form>
              </div>
            </div>
          </div>
        </div>
      </section>
      
      <!-- Espace r√©serv√© pour autres sections -->
<!-- Section principale -->
<section id="notifications" class="dashboard-section">
  <div class="section-header">
    <h2>Notifications</h2>
    <p>Alertes sur vos √©ch√©ances et messages non lus</p>
  </div>

  <div class="notification-list" id="notifications-content">
    <p>Chargement des notifications...</p>
  </div>
</section>

      
<section id="messages" class="dashboard-section">
  

  <div id="messaging-interface" class="messaging-container">
    <!-- Liste des conversations -->
    <div class="conversation-list">
      
      <div class="conversation-header">Conversations</div>
      <ul id="conversationList">
        <li class="loading">Chargement...</li>
      </ul>

      <div class="new-conversation-wrapper">
  <button id="toggleNewConversation" class="new-conversation-toggle">+</button>

  <div id="newConversationForm" class="new-conversation-form hidden">
    <input type="email" id="newConversationEmail" placeholder="Email du contact..." />
    <button id="startConversationBtn">Commencer</button>
  </div>
</div>

    </div>

    <!-- Zone de chat -->
    <div class="chat-box" id="chat-box">
      <div id="chatHeader" class="chat-header">Conversation</div>
      <div id="chatWindow" class="chat-window">
        <p>S√©lectionnez une conversation</p>
      </div>

      <form id="sendMessageForm" class="chat-form">
        <input type="hidden" id="receiverEmail" />
        <textarea id="messageContent" placeholder="√âcrivez un message..." required></textarea>
        <div class="form-actions">
          <input type="file" id="fileInput" accept="image/*,.pdf" />
          <button type="submit">Envoyer</button>
        </div>
      </form>
    </div>
  </div>
</section>

      
      <section id="settings" class="dashboard-section">
        <div class="section-header">
          <h2>Param√®tres</h2>
          <p>G√©rez les param√®tres et pr√©f√©rences de votre compte</p>
        </div>
        <!-- Contenu des param√®tres sera impl√©ment√© ult√©rieurement -->
        <!-- <div class="placeholder-message">
          <p>Les param√®tres du compte seront bient√¥t disponibles.</p>
        </div> -->
        <form id="settings-form">
  <div class="form-group">
    <label for="language">Langue de l'interface</label>
    <select id="language" class="form-control">
      <option value="fr">Fran√ßais</option>
      <option value="en">English</option>
    </select>
  </div>

  <div class="form-group">
    <label>Notifications Email</label>
    <div class="checkbox-group">
      <label><input type="checkbox" checked> Recevoir un email pour chaque message</label><br>
      <label><input type="checkbox" checked> √ätre notifi√© des √©ch√©ances importantes</label><br>
      <label><input type="checkbox"> Alertes sur l'avancement de th√®se</label>
    </div>
  </div>

  <div class="form-group">
    <label for="new-password">Changer le mot de passe</label>
    <input type="password" id="new-password" class="form-control" placeholder="Nouveau mot de passe">
  </div>

  <div class="form-group">
    <label for="confirm-password">Confirmer le mot de passe</label>
    <input type="password" id="confirm-password" class="form-control" placeholder="Confirmer le mot de passe">
  </div>

  <div class="form-actions">
    <button type="submit" class="btn btn-primary">Sauvegarder</button>
    <button type="reset" class="btn btn-secondary">Annuler</button>
  </div>
</form>

      </section>
    </div>
  </div>

  <script>
document.addEventListener('DOMContentLoaded', function () {
  fetch('http://localhost:8081/api/ressources/all', {
    credentials: 'include'
  })
    .then(res => res.json())
    .then(data => {
      data.forEach(res => {
        if (res.titre.includes('Directives')) {
          document.getElementById('telecharger-link').href = res.lien;
        } else if (res.titre.includes('Calendrier')) {
          document.getElementById('voir-link').href = res.lien;
        } else if (res.titre.includes('Ressources')) {
          document.getElementById('acceder-link').href = res.lien;
        }
      });
    })
    .catch(err => console.error('Erreur lors du chargement des ressources :', err));
});



    document.addEventListener("DOMContentLoaded", () => {
      fetch("http://localhost:8081/api/doctorant/echeances", {
        method: "GET",
        credentials: "include" // important pour les cookies JWT
      })
      .then(res => res.json())
      .then(data => {
        const list = document.getElementById("deadline-list");
        list.innerHTML = ""; // on vide l'ancien contenu
    
        data.forEach(item => {
          const statutClass = getStatutClass(item.statut);
    
          const li = document.createElement("li");
          li.className = "deadline-item";
    console.log(data);
          li.innerHTML = `
            <div class="deadline-date">
              <span class="month">${item.mois}</span>
              <span class="day">${item.jour}</span>
            </div>
            <div class="deadline-info">
              <h4>${item.titre}</h4>
              <p>${item.description}</p>
            </div>
            <div class="deadline-status ${statutClass}">
              <span>${item.statut}</span>
            </div>
          `;
    
          list.appendChild(li);
        });
      })
      .catch(err => console.error("Erreur de chargement des √©ch√©ances :", err));
    });
    
    function getStatutClass(statut) {
      switch (statut.toLowerCase()) {
        case "urgent": return "urgent";
        case "√† venir": return "upcoming";
        case "planifi√©": return "planned";
        default: return "";
      }
    }
    </script>
    <script>
document.addEventListener("DOMContentLoaded", () => {
  fetch("http://localhost:8081/api/doctorant/equipe-direction", { credentials: 'include' })
    .then(response => {
      console.log("R√©ponse brute:", response);
      return response.json();
    })
    .then(data => {
      console.log("Donn√©es √©quipe:", data);
      displayEquipe(data);
    })
    .catch(error => console.error("Erreur fetch √©quipe:", error));
});

function displayEquipe(equipe) {
  const container = document.getElementById("supervisor-list");
  container.innerHTML = "";

  equipe.forEach(member => {
    const initials = getInitials(member.prenom, member.nom);
    const fullName = `${getTitle(member.role)} ${member.prenom} ${member.nom}`;
    const mail = member.email;

    const card = document.createElement("div");
    card.className = "supervisor-item";
    card.innerHTML = `
      <div class="supervisor-avatar">
        <div class="avatar-placeholder">${initials}</div>
      </div>
      <div class="supervisor-info">
        <h4>${fullName}</h4>
        <p>${member.role} de th√®se</p>
        <div class="supervisor-contact">
          <a href="mailto:${mail}" class="contact-link email">Email</a>
          <a href="#" class="contact-link message" data-email="${mail}">Message</a>
        </div>
      </div>
    `;

    // ‚¨áÔ∏è Ajouter le bouton et son √©couteur juste apr√®s cr√©ation
    card.querySelector(".contact-link.message").addEventListener("click", function (e) {
      e.preventDefault();

      const email = this.getAttribute("data-email");

      // Aller vers la section "messages"
      document.querySelectorAll(".dashboard-section").forEach(section =>
        section.classList.remove("active")
      );
      document.getElementById("messages").classList.add("active");

      // Remplir et simuler la cr√©ation de conversation
      const input = document.getElementById("newConversationEmail");
      input.value = email;

      // D√©clencher la conversation
      document.getElementById("startConversationBtn").click();
    });

    container.appendChild(card);
  });
}



function getInitials(prenom, nom) {
  const p = prenom?.charAt(0).toUpperCase() || '';
  const n = nom?.charAt(0).toUpperCase() || '';
  return p + n;
}

function getTitle(role) {
  const r = role.toLowerCase();
  if (r.includes("directeur")) return "Prof.";
  if (r.includes("encadrant") || r.includes("superviseur")) return "Dr.";
  return "";
}
</script>

<script>
document.addEventListener("DOMContentLoaded", () => {
  loadNotificationSummary();
});

function loadNotificationSummary() {
  fetch("http://localhost:8081/api/doctorant/notifications", {
    credentials: "include"
  })
    .then(res => res.json())
    .then(data => {
      const { nbEcheancesUrgentes, nbMessagesNonLus } = data;
      const total = nbEcheancesUrgentes + nbMessagesNonLus;
      const badge = document.getElementById("notification-badge");
      const container = document.getElementById("notifications-content");

      // Badge
      badge.textContent = total > 0 ? total : "";

      // Affichage dans la section
      if (total === 0) {
        container.innerHTML = "<p>Aucune notification.</p>";
      } else {
        container.innerHTML = "";

        if (nbEcheancesUrgentes > 0) {
          const ech = document.createElement("div");
          ech.className = "notification-item urgent";
          ech.innerHTML = `üîî Vous avez <strong>${nbEcheancesUrgentes}</strong> √©ch√©ance(s) urgente(s)`;
          container.appendChild(ech);
        }

        if (nbMessagesNonLus > 0) {
          const msg = document.createElement("div");
          msg.className = "notification-item";
          msg.innerHTML = `üì© Vous avez <strong>${nbMessagesNonLus}</strong> message(s) non lu(s)`;
          container.appendChild(msg);
        }

           const nbr = document.getElementById("notification-txt");
        nbr.innerText = nbEcheancesUrgentes + nbMessagesNonLus;
      }
    })
    .catch(err => {
      console.error(err);
      document.getElementById("notifications-content").innerHTML =
        "<p>Erreur lors du chargement des notifications.</p>";
    });
}
</script>

</body>
</html>